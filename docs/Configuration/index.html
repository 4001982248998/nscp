<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta http-equiv="Content-Language" content="en-us">
<title>Configuration</title>
<link rel="stylesheet" type="text/css" href="../nscplus.css">
</head>

<body>

<div id="content" class="documentContent">
	<h1>Configuration</h1>
	<p>Configuration is fairly simple and straight forward. Open the configuration 
	file in notepad (or you favorite editor) “notepad &lt;installation path&gt;\NSC.ini” 
	and edit it accordingly. A longer description of the Configuration file is included 
	in the following page.</p>
	<p>&nbsp;</p>
	<p>The file has sections (denoted with section name in brackets) and key/value 
	pairs (denoted by key=value). Thus it has the same syntax as pretty much any 
	other INI file in windows.</p>
	<p>&nbsp;</p>
	<p>The sections are described in short below. The default configuration file 
	has a lot of examples and comments so make sure you change this before you use 
	NSClient++ as some of the examples might be potential security issues.</p>
	<h2>[Settings]</h2>
	<p>This section has options for how logging is performed. First off notice that 
	for logging to make sense you need to enable the “FileLogger.dll” module that 
	logs all log data to a text file in the same directory as the NSClient++ binary 
	if you don’t enable any logging module nothing will be logged.</p>
	<p>The options you have available here are</p>
	<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" id="table21">
		<tr>
			<td valign="top">Option</td>
			<td valign="top">Default value</td>
			<td valign="top">Description</td>
		</tr>
		<tr>
			<td valign="top">obfuscated_password</td>
			<td valign="top">...</td>
			<td valign="top">An obfuscated version of password. For more details 
			refer to the password option below.</td>
		</tr>
		<tr>
			<td valign="top">password</td>
			<td valign="top">...</td>
			<td valign="top">The password used by various (presently only 
			NSClient) daemons. If no password is set everyone will be able to 
			use this service remotely.</td>
		</tr>
		<tr>
			<td valign="top">allowed_hosts</td>
			<td valign="top">127.0.0.1</td>
			<td valign="top">A list (comma separated) with hosts that are 
			allowed to connect and query data. If this is empty all hosts will 
			be allowed to query data.</td>
		</tr>
	</table>
	<h2>[Log]</h2>
	<p>This section has options for how logging is performed. First off notice that 
	for logging to make sense you need to enable the “FileLogger.dll” module that 
	logs all log data to a text file in the same directory as the NSClient++ binary 
	if you don’t enable any logging module nothing will be logged.</p>
	<p>The options you have available here are</p>
	<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" id="table16">
		<tr>
			<td valign="top">Option</td>
			<td valign="top">Default value</td>
			<td valign="top">Description</td>
		</tr>
		<tr>
			<td valign="top">debug</td>
			<td valign="top">0</td>
			<td valign="top">A Boolean value that toggles if debug information should 
			be logged or not. This can be either 1 or 0.</td>
		</tr>
		<tr>
			<td valign="top">file</td>
			<td valign="top">nsclient.log</td>
			<td valign="top">The file to write log data to. If no directory is used 
			this is relative to the NSClient++ binary.</td>
		</tr>
		<tr>
			<td valign="top">date_mask</td>
			<td valign="top">%Y-%m-%d %H:%M:%S</td>
			<td valign="top">The date format used when logging to a file</td>
		</tr>
	</table>
	<h2>[Systray]</h2>
	<p>This section configures the system tray module.</p>
	<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" id="table17">
		<tr>
			<td valign="top">Option</td>
			<td valign="top">Default value</td>
			<td valign="top">Description</td>
		</tr>
		<tr>
			<td valign="top">defaultCommand</td>
			<td valign="top">…</td>
			<td valign="top">A string that will be the default in the inject command 
			dialog.</td>
		</tr>
	</table>
	<h2>[NSClient]</h2>
	<p>This is the NSClient module configuration options.</p>
	<p><b><i>This is subject to change in the near future</i></b></p>
	<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" id="table18">
		<tr>
			<td valign="top">Option</td>
			<td valign="top">Default value</td>
			<td valign="top">Description</td>
		</tr>
		<tr>
			<td valign="top">port</td>
			<td valign="top">12489</td>
			<td valign="top">The port to listen to</td>
		</tr>
		<tr>
			<td valign="top">obfuscated_password</td>
			<td valign="top">&nbsp;</td>
			<td valign="top">An obfuscated version of password. For more details 
			refer to the password option below. </td>
		</tr>
		<tr>
			<td valign="top">password</td>
			<td valign="top">&nbsp;</td>
			<td valign="top">The password that incoming client needs to authorize 
			themselves by. This option will replace the one found under Settings 
			for NSClient. If this is blank the option found under Settings will 
			be used. If both are blank everyone will be granted access.</td>
		</tr>
		<tr>
			<td valign="top">allowed_hosts</td>
			<td valign="top">&nbsp;</td>
			<td valign="top">A list (coma separated) with hosts that are allowed 
			to poll information from NSClient++. This will replace the one found 
			under Setting for NSClient if present. If not present the same 
			option found under Settings will be used. If both are blank all 
			hosts will be allowed to access the system</td>
		</tr>
		</table>
	<h2>[NRPE]</h2>
	<p>This is configuration for the NRPE module that controls how the NRPE listener 
	operates. </p>
	<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" id="table19">
		<tr>
			<td valign="top">Option</td>
			<td valign="top">Default value</td>
			<td valign="top">Description</td>
		</tr>
		<tr>
			<td valign="top">port</td>
			<td valign="top">5666</td>
			<td valign="top">The port to listen to</td>
		</tr>
		<tr>
			<td valign="top">allowed_hosts</td>
			<td valign="top">&nbsp;</td>
			<td valign="top">A list (coma separated) with hosts that are allowed 
			to poll information from NRPE. This will replace the one found under 
			Setting for NRPE if present. If not present the same option found 
			under Settings will be used. If both are blank all hosts will be 
			allowed to access the system</td>
		</tr>
		<tr>
			<td valign="top">use_ssl</td>
			<td valign="top">1</td>
			<td valign="top">Boolean value to toggle SSL encryption on the socket 
			connection</td>
		</tr>
		<tr>
			<td valign="top">command_timeout</td>
			<td valign="top">60</td>
			<td valign="top">The maximum time in seconds that a command can execute. 
			(if more then this execution will be aborted).<b> NOTICE</b> this only 
			affects external commands not internal ones.</td>
		</tr>
		<tr>
			<td valign="top">allow_arguments</td>
			<td valign="top">0</td>
			<td valign="top">A Boolean flag to determine if arguments are accepted 
			on the incoming socket. If arguments are not accepted you can still 
			use external commands that need arguments but you have to define them 
			in the NRPE handlers below. This is similar to the NRPE “dont_blame_nrpe” 
			option.</td>
		</tr>
		<tr>
			<td valign="top">allow_nasty_meta_chars</td>
			<td valign="top">0</td>
			<td valign="top">Allow NRPE execution to have “nasty” meta characters 
			that might affect execution of external commands (things like &gt; “ etc).</td>
		</tr>
	</table>
	<h2>[NRPE Handlers]</h2>
	<p>This is a list of handlers for NRPE execution this can of course be used 
	by any module (such as NSClient) but for historical reasons they are located 
	in this section especially as NRPE plug-in is the one that does the actual execution.</p>
	<p>The handlers can have two different syntaxes:</p>
	<p>Either “command[my_command]=/some/executable” or “my_command=/some/executable” 
	The latter is the preferred way as it is shorter.</p>
	<h2>[Check System]</h2>
	<p>Here you can set various options to configure the System Check module.</p>
	<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" id="table22">
		<tr>
			<td valign="top" width="184">Option</td>
			<td valign="top">Default value</td>
			<td valign="top">Description</td>
		</tr>
		<tr>
			<td valign="top" width="184">CPUBufferSize</td>
			<td valign="top">1h</td>
			<td valign="top">The time to store CPU load.</td>
		</tr>
		<tr>
			<td valign="top" width="184">CheckResolution</td>
			<td valign="top">10</td>
			<td valign="top">Time between checks in 1/10 of seconds.</td>
		</tr>
		<tr>
			<td valign="top" width="184">auto_detect_pdh</td>
			<td valign="top">1</td>
			<td valign="top">Set this to 0 to disable auto detect (counters.defs) 
			PDH language and OS version.</td>
		</tr>
		<tr>
			<td valign="top" width="184" bgcolor="#D3D3D3"><i>MemoryCommitLimit</i></td>
			<td valign="top" bgcolor="#D3D3D3"><i>\Memory\Commit Limit</i></td>
			<td valign="top" bgcolor="#D3D3D3"><i>Counter to use to check upper memory limit.</i></td>
		</tr>
		<tr>
			<td valign="top" width="184" bgcolor="#D3D3D3"><i>MemoryCommitByte</i></td>
			<td valign="top" bgcolor="#D3D3D3"><i>\Memory\Committed Bytes</i></td>
			<td valign="top" bgcolor="#D3D3D3"><i>Counter to use to check current memory usage.</i></td>
		</tr>
		<tr>
			<td valign="top" width="184" bgcolor="#D3D3D3"><i>SystemSystemUpTime</i></td>
			<td valign="top" bgcolor="#D3D3D3"><i>\System\System Up Time</i></td>
			<td valign="top" bgcolor="#D3D3D3"><i>Counter to use to check the uptime of the system.</i></td>
		</tr>
		<tr>
			<td valign="top" width="184" bgcolor="#D3D3D3"><i>
			SystemTotalProcessorTime</i></td>
			<td valign="top" bgcolor="#D3D3D3"><i>\Processor(_total)\% Processor Time</i></td>
			<td valign="top" bgcolor="#D3D3D3"><i>Counter to use for CPU load.</i></td>
		</tr>
		<tr>
			<td valign="top" width="184">ProcessEnumerationMethod</td>
			<td valign="top">auto</td>
			<td valign="top">Set the PROCESS enumeration method (auto or 
			TOOLHELP or PSAPI)</td>
		</tr>
	</table>
	<h2>[modules]</h2>
	<p>This is a list of modules to load at startup. All the modules included in 
	this list has to be NSClient++ modules and located in the modules subdirectory. 
	This is in effect the list of plug-ins that will be available as the service 
	is running.</p>
	<p>A good idea here is to disable all modules you don’t actually use for two 
	reasons. One less code equals less potential security holes and two less modules 
	means less resource drain.</p>
</div>

</body>

</html>
