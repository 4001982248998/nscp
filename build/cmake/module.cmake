SOURCE_GROUP("Common Files" REGULAR_EXPRESSION .*include/.*)
SOURCE_GROUP("Parser" REGULAR_EXPRESSION .*include/parser/.*)
SOURCE_GROUP("NSCP API" REGULAR_EXPRESSION .*include/nscapi/.*)
SOURCE_GROUP("Filter" REGULAR_EXPRESSION .*include/parsers/.*)

SET_TARGET_PROPERTIES(${TARGET} PROPERTIES FOLDER ${MODULE_SUBFOLDER})
#IF(BREAKPAD_FOUND)
#	ADD_CUSTOM_COMMAND(TARGET ${TARGET} 
#		POST_BUILD 
#		COMMAND ${BREAKPAD_DUMPSYMS_EXE} ${BUILD_TARGET_LIB_PATH}/${TARGET}.pdb > ${BUILD_TARGET_LIB_PATH}/${TARGET}.sym
#		COMMENT Building symbols into ${BUILD_TARGET_LIB_PATH}/${TARGET}.sym
#		)
#ENDIF(BREAKPAD_FOUND)

INSTALL(TARGETS ${TARGET} LIBRARY DESTINATION ${MODULE_SUBFOLDER})
if (MSVC11)
	MESSAGE(STATUS "Targeting ${TARGET} into ${BUILD_TARGET_LIB_PATH}")
	SET_TARGET_PROPERTIES(${TARGET} PROPERTIES LIBRARY_OUTPUT_DIRECTORY ${BUILD_TARGET_LIB_PATH})
	SET_TARGET_PROPERTIES(${TARGET} PROPERTIES LIBRARY_OUTPUT_DIRECTORY_DEBUG ${BUILD_TARGET_LIB_PATH})
	SET_TARGET_PROPERTIES(${TARGET} PROPERTIES LIBRARY_OUTPUT_DIRECTORY_RELEASE ${BUILD_TARGET_LIB_PATH})
	SET_TARGET_PROPERTIES(${TARGET} PROPERTIES LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO ${BUILD_TARGET_LIB_PATH})
endif(MSVC11)
IF(BREAKPAD_FOUND)
	INSTALL(CODE "SET(PDB_FULL_PATH ${BUILD_TARGET_LIB_PATH}/${TARGET}.pdb)")
	INSTALL(CODE "FILE(INSTALL DESTINATION \${CMAKE_INSTALL_PREFIX}/${MODULE_SUBFOLDER} TYPE EXECUTABLE FILES \${PDB_FULL_PATH})")
#	INSTALL(CODE "SET(SYM_FULL_PATH ${BUILD_TARGET_LIB_PATH}/${TARGET}.sym)")
#	INSTALL(CODE "ADD_CUSTOM_COMMAND(OUTPUT \${SYM_FULL_PATH} COMMAND ${BREAKPAD_DUMPSYMS_EXE} \${PDB_FULL_PATH} > \${SYM_FULL_PATH})")
#	INSTALL(CODE "FILE(INSTALL DESTINATION \${CMAKE_INSTALL_PREFIX}/${MODULE_SUBFOLDER} TYPE EXECUTABLE FILES \${SYM_FULL_PATH})")
ENDIF(BREAKPAD_FOUND)


