CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

SET(TARGET fw_dll)
	
PROJECT(${TARGET})

SET(SRCS
	${TARGET}.cpp
	firewall.cpp
)

ADD_DEFINITIONS(${NSCP_GLOBAL_DEFINES})

IF(WIN32)
	SET(SRCS ${SRCS}
		"${TARGET}.def"
	)
ENDIF(WIN32)

INCLUDE_DIRECTORIES(${PSDK_2003_INCLUDE_DIRS})
#LINK_DIRECTORIES(${PSDK_2003_LIBRARY_DIRS})

add_library(${TARGET} MODULE ${SRCS})

target_link_libraries(${TARGET}
	${Boost_FILESYSTEM_LIBRARY}
	${Boost_SYSTEM_LIBRARY}
	Msi.lib
	bufferoverflowu.lib
)
#	hnetcfg.lib

SET_TARGET_PROPERTIES(${TARGET} PROPERTIES FOLDER "installer-dll")

INSTALL(TARGETS ${TARGET} LIBRARY DESTINATION helpers)