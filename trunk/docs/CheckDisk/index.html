<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>CheckDisk</title>
<link rel="stylesheet" type="text/css" href="../nscplus.css">
<base target="_self">
</head>

<body>

<div id="content" class="documentContent">
	<h1>CheckDisk.dll</h1>
	<p>The CheckDisk module has various disk related checks currently focusing on 
	size. But hopefully it will be extended with date existence and many other disk 
	related checks in the future. Feel free to request checks that you need.</p>
	<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" id="table4">
		<tr>
			<th valign="top">Command </th>
			<th valign="top">Description </th>
		</tr>
		<tr>
			<td valign="top">CheckFileSize </td>
			<td valign="top">Check the size of one or more files or directories.
			</td>
		</tr>
		<tr>
			<td valign="top">CheckDriveSize </td>
			<td valign="top">Check the size of one or more Drives </td>
		</tr>
	</table>
	<h2>Configuration</h2>
	<p><i>This module has no configuration directives.</i></p>
	<h2>CheckFileSize</h2>
	<p>This check does a recursive size calculation of the directory (or file) specified. 
	A request has one or more options described in the table below. </p>
	<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" id="table5">
		<tr>
			<th valign="top">Option </th>
			<th valign="top">Values </th>
			<th valign="top">Description </th>
		</tr>
		<tr>
			<td valign="top">MaxWarn </td>
			<td valign="top">Size with optional postfix</td>
			<td valign="top">The maximum size the directory is allowed before a 
			warning state is returned. </td>
		</tr>
		<tr>
			<td valign="top">MaxCrit </td>
			<td valign="top">Size with optional postfix </td>
			<td valign="top">The maximum size the directory is allowed before a 
			critical state is returned. </td>
		</tr>
		<tr>
			<td valign="top">MinWarn </td>
			<td valign="top">Size with optional postfix </td>
			<td valign="top">The minimum size the directory is allowed before a 
			warning state is returned. </td>
		</tr>
		<tr>
			<td valign="top">MinCrit </td>
			<td valign="top">Size with optional postfix </td>
			<td valign="top">The minimum size the directory is allowed before a 
			critical state is returned. </td>
		</tr>
		<tr>
			<td valign="top">ShowAll </td>
			<td valign="top"><i>None</i> </td>
			<td valign="top">A Boolean flag to show size of directories that are 
			not in an alarm state. If this is not specified only drives with an 
			alarm state will be listed in the resulting string. </td>
		</tr>
		<tr>
			<td valign="top">File </td>
			<td valign="top">File or directory name </td>
			<td valign="top">The name of the file or directory that should have 
			its size calculated. Notice that large directory structures will take 
			a long time to check. </td>
		</tr>
		<tr>
			<td valign="top">
			<p>File:&lt;alias&gt;</p>
			</td>
			<td valign="top">
			<p>File or directory name</p>
			</td>
			<td valign="top">
			<p>Same as the file option but using a short alias in the returned data.</p>
			</td>
		</tr>
	</table>
	<p>The “Size with optional postfix” is a way to simply specify large sizes by 
	adding unit postfix. The available postfixes are B for Byte, K for Kilobyte, 
	M for Megabyte and finally G for Gigabyte. </p>
	<h3>Examples</h3>
	<div class="example">
		<ul>
			<li>
			<p><b>Check the size of the windows directory and make sure it stays below 
			1 gigabyte:</b></p>
			<p><code>CheckFileSize ShowAll MaxWarn=1024M MaxCrit=4096M File:WIN=c:\WINDOWS\*.*</code></p>
			<p><code>WARNING: WIN: 2G (2325339822B)|WIN=2325339822;1073741824;4294967296</code></p>
			<div class="config">
				<p>define command { </p>
				<p>&nbsp;&nbsp;&nbsp; command_name CheckFileSize </p>
				<p>&nbsp;&nbsp;&nbsp; command_line check_nrpe -H $HOSTADDRESS$ -p 
				5666 -c CheckFileSize -a ShowAll MaxWarn=$ARG1$ MaxCrit=$ARG2$ 
				File:$ARG4$=$ARG5$ </p>
				<p>}</p>
				<p>&nbsp;&nbsp;&nbsp; check_command CheckFileSize!1024M!4096M!WIN!c:\WINDOWS\*.*
				</p>
			</div>
			</li>
			<li>
			<p><b>Check the size of the pagefile.sys and make sure it stays 
			above 1 gigabyte:</b></p>
			<p><code>CheckFileSize ShowAll MinWarn=1G MinCrit=512M File=c:\pagefile.sys</code></p>
			<p><code>OK: c:\pagefile.sys: 1G (1610612736B)</code></p>
			<div class="config">
				<p>define command { </p>
				<p>&nbsp;&nbsp;&nbsp; command_name CheckPageFile </p>
				<p>&nbsp;&nbsp;&nbsp; command_line check_nrpe -H $HOSTADDRESS$ -p 
				5666 -c CheckFileSize -a ShowAll MinWarn=$ARG1$ MinCrit=$ARG2$ 
				File:PageFile=c:\pagefile.sys </p>
				<p>}</p>
				<p>&nbsp;&nbsp;&nbsp; check_command CheckPageFile!1G!512M</p>
			</div>
			</li>
		</ul>
	</div>
	<h2>CheckDriveSize</h2>
	<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" id="table6">
		<tr>
			<th valign="top">Option </th>
			<th valign="top">Values </th>
			<th valign="top">Description </td>
			</th>
		</tr>
		<tr>
			<td valign="top">MaxWarn&lt; </td>
			<td valign="top">Size with optional postfix (g, m, k, b, %)</td>
			<td valign="top">The maximum size the directory is allowed before a 
			warning state is returned.</td>
		</tr>
		<tr>
			<td valign="top">MaxCrit </td>
			<td valign="top">Size with optional postfix (g, m, k, b, %) </td>
			<td valign="top">The maximum size the directory is allowed before a 
			critical state is returned. </td>
		</tr>
		<tr>
			<td valign="top">MinWarn </td>
			<td valign="top">Size with optional postfix (g, m, k, b, %) </td>
			<td valign="top">The minimum size the directory is allowed before a 
			warning state is returned. </td>
		</tr>
		<tr>
			<td valign="top">MinCrit </td>
			<td valign="top">Size with optional postfix (g, m, k, b, %) </td>
			<td valign="top">The minimum size the directory is allowed before a 
			critical state is returned. </td>
		</tr>
		<tr>
			<td valign="top">ShowAll </td>
			<td valign="top"><i>None</i> </td>
			<td valign="top">
			<p>A Boolean flag to show size of directories that are not in an alarm 
			state. If this is not specified only drives with an alarm state will 
			be listed in the resulting string.</p>
			</td>
		</tr>
		<tr>
			<td valign="top">Drive </td>
			<td valign="top">A Drive letter or the path of a mounted Volume </td>
			<td valign="top">The letter of the drive to check. Notice that the drive 
			has to be a fixed drive. </td>
		</tr>
		<tr>
			<td valign="top">FilterType</td>
			<td valign="top">FIXED, CDROM, REMOVABLE</td>
			<td valign="top">Filter for drive type to prevent checking drives of 
			certain kinds (most useful when using CheckAll). The default is FIXED</td>
		</tr>
		<tr>
			<td valign="top">CheckAll</td>
			<td valign="top"><i>None</i></td>
			<td valign="top">Check all available drives</td>
		</tr>
	</table>
	<p>The “Size with optional postfix” is a way to simply specify large sizes by 
	adding unit postfix. The available postfixes are B for Byte, K for Kilobyte, 
	M for Megabyte, G for Gigabyte and finally % for percent free space. </p>
	<h3>Examples</h3>
	<div class="example">
		<ul>
			<li>
			<p><b>Check the size of C:\ and make sure it has 50% free space:</b></p>
			<p><code>CheckDriveSize ShowAll MaxWarn=50% MaxCrit=75% Drive=c:\</code></p>
			<p><code>OK: c:: 63G (68374007808B)|c:=85% 50;75;</code></p>
			<div class="config">
				<p>define command { </p>
				<p>&nbsp;&nbsp;&nbsp; command_name CheckDriveSize </p>
				<p>&nbsp;&nbsp;&nbsp; command_line check_nrpe -H $HOSTADDRESS$ -p 
				5666 -c CheckDriveSize -a Drive=$ARG1$ ShowAll MaxWarn=$ARG2$ 
				MaxCrit=$ARG3$ </p>
				<p>}</p>
				<p>&nbsp;&nbsp;&nbsp; check_command CheckDriveSize!C:\!50%!75%</p>
			</div>
			</li>
			<li>
			<p><b>To check the size of mounted volume c:\volumne_test and make sure 
			it has 1M free space</b></p>
			<p><code>CheckDriveSize ShowAll MaxWarn=1M MaxCrit=2M Drive=&quot;c:\\volumne_test\\&quot;</code></p>
			<p><code>CRITICAL: c:\volumne_test\: 3M (4193280B)|c:\volumne_test\=4193280;0;0;</code></p>
			<div class="config">
				<p>&nbsp;&nbsp;&nbsp; check_command CheckDriveSize!<code>c:\volumne_test\</code>!1M!2M</p>
			</div>
			</li>
			<li>
			<p><b>To check the size of all fixed and network drives and make sure they 
			are at least 50% full</b></p>
			<p><code>CheckDriveSize -a MinWarn=50% MinCrit=25% CheckAll FilterType=FIXED 
			FilterType=REMOTE</code></p>
			<p><code>WARNING: X:\: 28% &lt; warning|C:\=84% 50%;25%; X:\=28% 50%;25%; 
			Y:\=98% 50%;25%;</code></p>
			<div class="config">
				<p>define command { </p>
				<p>&nbsp;&nbsp;&nbsp; command_name CheckAllDrives </p>
				<p>&nbsp;&nbsp;&nbsp; command_line check_nrpe -H $HOSTADDRESS$ -p 
				5666 -c CheckDriveSize -a Drive=$ARG1$ CheckAll FilterType=FIXED 
			FilterType=REMOTE MinWarn=$ARG1$ MinCrit=$ARG2$ </p>
				<p>}</p>
				<p>&nbsp;&nbsp;&nbsp; check_command CheckAllDrives!25%!50%</p>
			</div>
			</li>
		</ul>
	</div>
</div>

</body>

</html>
